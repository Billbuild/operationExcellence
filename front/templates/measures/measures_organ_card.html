{% extends 'base/ancestor_factory_workshop.html' %}
{% load template_filters %}

<!-- 头文件，主要是 css 文件 -->
{% block head %}
<style>
    .workshop-nav {
        position: fixed;
        top: 0;
        width: 100%;
        background: #fff;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        z-index: 1000;
    }
    .workshop-nav ul {
        display: flex;
        gap: 15px;
        padding: 0.5rem;
        margin: 0;
        list-style: none;
    }
    .workshop-nav a {
        text-decoration: none;
        color: #333;
        padding: 0.5rem 1rem;
        border-radius: 4px;
        transition: 0.3s;
    }
    .workshop-nav a.active {
        background: #2196F3;
        color: white;
    }

    .workshop-section {
        {#padding: 100px 20px 40px;#}
        padding-top: 60px;
        min-height: 100vh;
    }
</style>

{% endblock %}

<!-- 标题 -->
{% block title %}{% endblock %}

<!-- 内容 -->
{% block content %}
    <nav class="workshop-nav">
        <ul>
            {% for ws in workshops %}
            <li class="nav-item">
                <a href="#section-{{ forloop.counter }}" class="nav-link {% if forloop.first %}active{% endif %}">
                    {{ ws }}
                </a>
            </li>
            {% endfor %}
        </ul>
    </nav>
    {% for data in workshop_dataset %}
    <section id="section-{{ forloop.counter }}" class="workshop-section">
        <!-- 标题，显示工厂 车间 时期 -->
        <div class="content-header">
            <div class="container-fluid">
                <div class="row mb-2">
                    <div class="col-sm-2">
    {#                    <h3 class="text-muted">01衢州 A车间</h3>#}
                        <h4 class="text-muted">{{ data.factory }} {{ data.workshop }}</h4>
                        <span></span>
                    </div>
                    <div>
    {#                    <span class="mr-1">{{ start_date|date:"Y-m-d" }}</span>#}
                        <span class="mr-1">{{ data.end_date|date:"Y-m-d" }}</span>
                        <button id="toggleButton" class="btn btn-sm btn-outline-primary">
                            <!-- 下拉键 -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" id="downArrow" class="bi bi-arrow-bar-down" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M1 3.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13a.5.5 0 0 1-.5-.5zM8 6a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 0 1 .708-.708L7.5 12.293V6.5A.5.5 0 0 1 8 6z"></path>
                            </svg>
                            <!-- 上拉键 -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" id="upArrow" class="bi bi-arrow-bar-up" viewBox="0 0 16 16" style="display: none">
                                <path fill-rule="evenodd" d="M8 10a.5.5 0 0 0 .5-.5V3.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 3.707V9.5a.5.5 0 0 0 .5.5zm-7 2.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13a.5.5 0 0 1-.5-.5z"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- 每个metrics 的内容 -->
        <div class="content">
            <div class="card">
                <div class="card-body pb-0">
                    <div class="row">
                        <!-- 运营指标 OWE -->
                        <!-- align-items-stretch 每个内容卡片等高 -->
                        <div class="col-12 col-sm-6 col-md-4 d-flex align-items-stretch flex-column">
                            <div class="card bg-light d-flex flex-fill">
                                <div class="card-header text-muted text-center border-bottom-0">
                                    <p class="text-muted text-gray-dark"><b>{{ data.owe_name_en }}（{{ data.owe_name_cn }}）</b></p>
                                    <p class="text-muted">
                                        <!-- file check -->
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-check text-success" viewBox="0 0 16 16">
                                            <path d="M10.854 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 8.793l2.646-2.647a.5.5 0 0 1 .708 0"></path>
                                            <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1"></path>
                                        </svg>
                                        <b>目标</b> {{ data.owe_target|percentage:2 }}
                                    </p>
                                </div>
                                <div class="card-body pt-0">
                                    <div class="row">
                                        <div class="col-7">
                                            <p class="text-muted text-sm">
                                                <!-- emoji smile fill -->
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-emoji-smile-fill text-blue" viewBox="0 0 16 16">
                                                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5M4.285 9.567a.5.5 0 0 1 .683.183A3.5 3.5 0 0 0 8 11.5a3.5 3.5 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.5 4.5 0 0 1 8 12.5a4.5 4.5 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683M10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8"></path>
                                                </svg>
                                                <b>直接人工：</b>{{ data.direct }}人
                                            </p>
                                            <p class="text-muted text-sm">
                                                <!-- emoji smile -->
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-emoji-smile text-blue" viewBox="0 0 16 16">
                                                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"></path>
                                                    <path d="M4.285 9.567a.5.5 0 0 1 .683.183A3.5 3.5 0 0 0 8 11.5a3.5 3.5 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.5 4.5 0 0 1 8 12.5a4.5 4.5 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5m4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5"></path>
                                                </svg>
                                                <b>辅助人工：</b>{{ data.indirect }}人
                                            </p>
                                            <p class="text-muted text-sm">
                                                <!-- clock -->
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock text-blue" viewBox="0 0 16 16">
                                                    <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71z"></path>
                                                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0"></path>
                                                </svg>
                                                <b>SAH：</b>{{ data.sah }}小时
                                            </p>
                                            <p class="text-muted text-sm">
                                                <!-- clock fill -->
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock-fill text-blue" viewBox="0 0 16 16">
                                                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71z"></path>
                                                </svg>
                                                <b>工作时长：</b>{{ data.working_hours }}小时
                                            </p>
                                        </div>
                                        <div class="col-5 d-flex align-items-center justify-content-center">
                                            <div class="text-center">
                                                <h2 class={{ data.owe_color }}>{{ data.owe|percentage:2 }}</h2>
                                                <p class="text-muted">
                                                    <!-- file check fill -->
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-check-fill {{ data.owe_color }}" viewBox="0 0 16 16">
                                                        <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1m1.354 4.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708.708"></path>
                                                    </svg>
                                                    <span class="{{ data.owe_color }}"><b>实际</b></span>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <a href="#" class="btn btn-sm bg-teal">
                                        <i class="fas fa-comments"></i>
                                    </a>
                                    <span class="text-muted text-sm">&nbsp;当月 {{ data.owe_name_en }} <span class="text-danger">73%</span>，未完成目标</span>
                                </div>
                            </div>
                        </div>
                        <!-- 运营指标 RFT -->
                        <!-- align-items-stretch 每个内容卡片等高 -->
                        <div class="col-12 col-sm-6 col-md-4 d-flex align-items-stretch flex-column">
                            <div class="card bg-light d-flex flex-fill">
                                <div class="card-header text-muted text-center border-bottom-0">
                                    <p class="text-muted text-gray-dark"><b>{{ data.rft_name_en }}（{{ data.rft_name_cn }}）</b></p>
                                    <p class="text-muted">
                                        <!-- file check -->
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-check text-success" viewBox="0 0 16 16">
                                            <path d="M10.854 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 8.793l2.646-2.647a.5.5 0 0 1 .708 0"></path>
                                            <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1"></path>
                                        </svg>
                                        <b>目标</b> {{ data.rft_target|percentage:2 }}
                                    </p>
                                </div>
                                <div class="card-body pt-0">
                                    <div class="row">
                                        <div class="col-7">
                                            <p class="text-muted text-sm">
                                                <!-- emoji smile fill -->
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-emoji-smile-fill text-blue" viewBox="0 0 16 16">
                                                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5M4.285 9.567a.5.5 0 0 1 .683.183A3.5 3.5 0 0 0 8 11.5a3.5 3.5 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.5 4.5 0 0 1 8 12.5a4.5 4.5 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683M10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8"></path>
                                                </svg>
                                                <b>产量：</b>{{ data.rft_output_volume }}
                                            </p>
                                            <p class="text-muted text-sm">
                                                <!-- emoji smile -->
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-emoji-smile text-blue" viewBox="0 0 16 16">
                                                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"></path>
                                                    <path d="M4.285 9.567a.5.5 0 0 1 .683.183A3.5 3.5 0 0 0 8 11.5a3.5 3.5 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.5 4.5 0 0 1 8 12.5a4.5 4.5 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5m4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5"></path>
                                                </svg>
                                                <b>合格品：</b>{{ data.rft_non_defects }}
                                            </p>
                                            <p class="text-muted text-sm">
                                                <!-- clock -->
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock text-blue" viewBox="0 0 16 16">
                                                    <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71z"></path>
                                                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0"></path>
                                                </svg>
                                                <b>不合格品：</b>{{ data.rft_defects }}
                                            </p>
    {#                                        <p class="text-muted text-sm">#}
    {#                                            <!-- clock fill -->#}
    {#                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock-fill text-blue" viewBox="0 0 16 16">#}
    {#                                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71z"></path>#}
    {#                                            </svg>#}
    {#                                            <b>工作时长：</b>350小时#}
    {#                                        </p>#}
                                        </div>
                                        <div class="col-5 d-flex align-items-center justify-content-center">
                                            <div class="text-center">
                                                <h2 class="{{ data.rft_color }}">{{ data.rft|percentage:2 }}</h2>
                                                <p class="text-muted">
                                                    <!-- file check fill -->
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-check-fill {{ data.rft_color }}" viewBox="0 0 16 16">
                                                        <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1m1.354 4.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708.708"></path>
                                                    </svg>
                                                    <span class="{{ data.rft_color }}"><b>实际</b></span>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <a href="#" class="btn btn-sm bg-teal">
                                        <i class="fas fa-comments"></i>
                                    </a>
                                    <span class="text-muted text-sm">&nbsp;当月 OWE <span class="text-danger">73%</span>，未完成目标</span>
                                </div>
                            </div>
                        </div>
                        <!-- 运营指标 Final Rework -->
                        <!-- align-items-stretch 每个内容卡片等高 -->
                        <div class="col-12 col-sm-6 col-md-4 d-flex align-items-stretch flex-column">
                            <div class="card bg-light d-flex flex-fill">
                                <div class="card-header text-muted text-center border-bottom-0">
                                    <p class="text-muted text-gray-dark"><b>{{ data.final_rework_name_en }}（{{ data.final_rework_name_cn }}）</b></p>
                                    <p class="text-muted">
                                        <!-- file check -->
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-check text-success" viewBox="0 0 16 16">
                                            <path d="M10.854 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 8.793l2.646-2.647a.5.5 0 0 1 .708 0"></path>
                                            <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1"></path>
                                        </svg>
                                        <b>目标</b> {{ data.final_rework_target|percentage:2 }}
                                    </p>
                                </div>
                                <div class="card-body pt-0">
                                    <div class="row">
                                        <div class="col-7">
                                            <p class="text-muted text-sm">
                                                <!-- emoji smile fill -->
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-emoji-smile-fill text-blue" viewBox="0 0 16 16">
                                                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5M4.285 9.567a.5.5 0 0 1 .683.183A3.5 3.5 0 0 0 8 11.5a3.5 3.5 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.5 4.5 0 0 1 8 12.5a4.5 4.5 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683M10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8"></path>
                                                </svg>
                                                <b>终检数量：</b>{{ data.final_rework_inspections }}
                                            </p>
                                            <p class="text-muted text-sm">
                                                <!-- emoji smile -->
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-emoji-smile text-blue" viewBox="0 0 16 16">
                                                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"></path>
                                                    <path d="M4.285 9.567a.5.5 0 0 1 .683.183A3.5 3.5 0 0 0 8 11.5a3.5 3.5 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.5 4.5 0 0 1 8 12.5a4.5 4.5 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5m4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5"></path>
                                                </svg>
                                                <b>合格数量：</b>{{ data.final_rework_qualified }}
                                            </p>
                                            <p class="text-muted text-sm">
                                                <!-- clock -->
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock text-blue" viewBox="0 0 16 16">
                                                    <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71z"></path>
                                                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0"></path>
                                                </svg>
                                                <b>不合格数量：</b>{{ data.final_rework_defects }}
                                            </p>
                                        </div>
                                        <div class="col-5 d-flex align-items-center justify-content-center">
                                            <div class="text-center">
                                                <h2 class="{{ data.final_rework_color }}">{{ data.final_rework|percentage:2 }}</h2>
                                                <p class="text-muted">
                                                    <!-- file check fill -->
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-check-fill text-danger" viewBox="0 0 16 16">
                                                        <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1m1.354 4.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708.708"></path>
                                                    </svg>
                                                    <b>实际</b>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <a href="#" class="btn btn-sm bg-teal">
                                        <i class="fas fa-comments"></i>
                                    </a>
                                    <span class="text-muted text-sm">&nbsp;当月 OWE <span class="text-danger">73%</span>，未完成目标</span>
                                </div>
                            </div>
                        </div>
                        <!-- 运营指标 BTS -->
                        <!-- align-items-stretch 每个内容卡片等高 -->
                        <div class="col-12 col-sm-6 col-md-4 d-flex align-items-stretch flex-column">
                            <div class="card bg-light d-flex flex-fill">
                                <div class="card-header text-muted text-center border-bottom-0">
                                    <p class="text-muted text-gray-dark"><b>{{ data.bts_name_en }}（{{ data.bts_name_cn }}）</b></p>
                                    <p class="text-muted">
                                        <!-- file check -->
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-check text-success" viewBox="0 0 16 16">
                                            <path d="M10.854 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 8.793l2.646-2.647a.5.5 0 0 1 .708 0"></path>
                                            <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1"></path>
                                        </svg>
                                        <b>目标</b> {{ data.bts_target|percentage:2 }}
                                    </p>
                                </div>
                                <div class="card-body pt-0">
                                    <div class="row">
                                        <div class="col-7">
                                            <p class="text-muted text-sm">
                                                <!-- emoji smile fill -->
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-emoji-smile-fill text-blue" viewBox="0 0 16 16">
                                                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5M4.285 9.567a.5.5 0 0 1 .683.183A3.5 3.5 0 0 0 8 11.5a3.5 3.5 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.5 4.5 0 0 1 8 12.5a4.5 4.5 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683M10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8"></path>
                                                </svg>
                                                <b>计划生产：</b>{{ data.bts_planned }}
                                            </p>
                                            <p class="text-muted text-sm">
                                                <!-- emoji smile -->
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-emoji-smile text-blue" viewBox="0 0 16 16">
                                                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"></path>
                                                    <path d="M4.285 9.567a.5.5 0 0 1 .683.183A3.5 3.5 0 0 0 8 11.5a3.5 3.5 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.5 4.5 0 0 1 8 12.5a4.5 4.5 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5m4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5"></path>
                                                </svg>
                                                <b>组合生产：</b>{{ data.bts_combined }}
                                            </p>
                                        </div>
                                        <div class="col-5 d-flex align-items-center justify-content-center">
                                            <div class="text-center">
                                                <h2 class="{{ data.bts_color }}">{{ data.bts|percentage:2 }}</h2>
                                                <p class="text-muted">
                                                    <!-- file check fill -->
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-check-fill text-danger" viewBox="0 0 16 16">
                                                        <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1m1.354 4.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708.708"></path>
                                                    </svg>
                                                    <b>实际</b>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <a href="#" class="btn btn-sm bg-teal">
                                        <i class="fas fa-comments"></i>
                                    </a>
                                    <span class="text-muted text-sm">&nbsp;当月 OWE <span class="text-danger">73%</span>，未完成目标</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    {% endfor %}
    <!-- toast -->
    <div class="position-fixed bottom-0 pt-3" style="z-index: 5; right: 0; bottom: 0">
        <div id="submitToast" class="toast" role="alert" aria-live="polite" aria-atomic="true" data-delay="2000">
            <div class="toast-header">
                <strong class="mr-auto">系统提示</strong>
                <button type="button" class="ml-2 mb-2 close" data-dismiss="toast" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="toast-body">
            hello world!
            </div>
        </div>
    </div>
{% endblock %}

<!-- 右侧侧边栏 控制栏 -->
{% block control-sidebar %}{% endblock %}

<!-- 文件末尾的 JavaScript 文件-->
{% block script %}
<script src="{% static 'adminlte/plugins/laydate-master/laydate-master/dist/laydate.js' %}"></script>
<script src="{% static 'js/measures_tools.min.js' %}"></script>
<script>
$(function() {
    // show toast
    function showToast(message, type = 'info') {
        const toast = $('#submitToast');
        toast.find('.toast-body')
            .removeClass('text-success text-danger')
            .addClass(type === 'success' ? 'text-success' : 'text-danger')
            .text(message);

        const bsToast = new bootstrap.Toast(toast.get(0));
        bsToast.show();
    }

    // 通过 laydate 插件建立时间段查询
    const dateRangeForm = $('#dateRangeForm');
    const startDate = $('#startDate');
    const endDate = $('#endDate');

    laydate.render({
        elem: '#rangeDate',
        range: ['#startDate', '#endDate']
    });

    $('#toggleButton').click(function () {
        $('#toggleCard').slideToggle(300);
        $('#downArrow, #upArrow').toggle();
    });
});
</script>
<script>
document.querySelectorAll('.nav-link').forEach(link => {
    // 监听每个 .nav-link 的链接，
    link.addEventListener('click', function (e) {
        e.preventDefault();
        // 获取链接对应的目标对象的id，比如 #section-1
        const targetId = this.getAttribute('href');
        // 获取目标对象
        const targetSection = document.querySelector(targetId);
        console.log(targetId)

        // 获取所有的 .nav-link 链接，移除类 .active
        document.querySelectorAll('.nav-link').forEach(item => item.classList.remove('active'));
        // 在被点击的链接（当前链接）上添加类 .active
        this.classList.add('active')

        // 目标对象滚入视窗，目标对象的起始部位进入默认位置
        targetSection.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
        });


    });
});
window.addEventListener('scroll', () => {
    const sections = document.querySelectorAll('.workshop-section');
    let currentSection = '';

    sections.forEach(section => {
        const sectionTop = section.offsetTop;
        if (window.scrollY >= sectionTop - 100) {
            currentSection = section.getAttribute('id');
        }
    });

    document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.toggle('active', link.getAttribute('href') === `#${currentSection}`)
    })
});
</script>

{% endblock %}